<div class="d-flex justify-content-between p-3 align-items-center">
  <h3 style="color: green; font-weight: bold">Quản lý sản phẩm</h3>
  <button class="btn btn-success" (click)="showDialog()">Thêm sản phẩm</button>
</div>
<p-dialog
  header="Thêm sản phẩm mới"
  [modal]="true"
  [(visible)]="visible"
  [style]="{ width: '25rem' }"
  draggable="false"
  appendTo="body"
>
  <div class="d-flex flex-column">
    <label for="productName" class="label">Tên sản phẩm <span class="require-input">*</span></label>
    <input
      pInputText
      id="productName"
      class="flex-auto"
      autocomplete="off"
      placeholder="Nhập tên sản phẩm"
      [(ngModel)]="productName"
      (blur)="blurValidate($event, 'productName')"
    />
  </div>
  <div class="d-flex flex-column mt-3">
    <label for="sku" class="label">SKU<span class="require-input">*</span></label>
    <input
      pInputText
      id="sku"
      class="flex-auto"
      autocomplete="off"
      placeholder="Nhập mã SKU"
      [(ngModel)]="sku"
      (blur)="blurValidate($event, 'sku')"
    />
  </div>
  <div class="d-flex mt-3 row">
    <div class="col-6 col-sm-6">
      <label for="importPrice" class="label">Giá nhập<span class="require-input">*</span></label>
      <input
        pInputText
        id="importPrice"
        class="flex-auto w-100"
        autocomplete="off"
        placeholder="0"
        (input)="inputPrice($event, 'importPrice')"
        (blur)="blurPrice($event, 'importPrice'); blurValidate($event, 'importPrice')"
        (focus)="focusPrice($event, 'importPrice')"
        (keydown)="keydownPrice($event)"
        (paste)="pastePrice($event, 'importPrice')"
      />
    </div>
    <div class="col-6 col-sm-6">
      <label for="sellingPrice" class="label">Giá bán<span class="require-input">*</span></label>
      <input
        pInputText
        id="sellingPrice"
        class="flex-auto w-100"
        autocomplete="off"
        placeholder="0"
        (input)="inputPrice($event, 'sellingPrice')"
        (blur)="blurPrice($event, 'sellingPrice'); blurValidate($event, 'sellingPrice')"
        (focus)="focusPrice($event, 'sellingPrice')"
        (keydown)="keydownPrice($event)"
        (paste)="pastePrice($event, 'sellingPrice')"
      />
    </div>
  </div>
  <div class="d-flex mt-3 row">
    <div class="col-6 col-sm-6">
      <label for="quantity" class="label">Số lượng<span class="require-input">*</span></label>
      <input
        pInputText
        id="quantity"
        class="flex-auto w-100"
        autocomplete="off"
        placeholder="0"
        type="number"
        (blur)="blurValidate($event, 'quantity')"
      />
    </div>
    <div class="col-6 col-sm-6">
      <label for="unit" class="label">Đơn vị<span class="require-input">*</span></label>
      <p-select
        id="unit"
        [options]="lstUnit"
        [(ngModel)]="unitSld"
        optionLabel="name"
        class="w-100"
        appendTo="body"
        [filter]="true"
        (onChange)="onSelectChange($event, 'unit')"
      />
    </div>
  </div>
  <div class="d-flex mt-3 row">
    <div class="col-6 col-sm-6">
      <label for="category" class="label">Phân loại</label>
      <input
        pInputText
        id="category"
        class="flex-auto w-100"
        autocomplete="off"
        [(ngModel)]="category"
        placeholder="Nhập tên loại"
        (blur)="blurValidate($event, 'category')"
      />
    </div>
    <div class="col-6 col-sm-6">
      <label for="categorySld" class="label">Phân loại đã có</label>
      <p-select
        id="categorySld"
        [options]="lstCategory"
        [(ngModel)]="categorySld"
        optionLabel="name"
        placeholder="Chọn"
        class="w-100"
        appendTo="body"
        [filter]="true"
        filterBy="name"
        [showClear]="true"
      />
    </div>
  </div>

  <div class="d-flex flex-column mt-3">
    <label for="barCode" class="label">Barcode<span class="require-input">*</span></label>
    <div class="d-flex justify-content-between gap-1">
      <input
        pInputText
        id="barCode"
        class="flex-auto w-100"
        autocomplete="off"
        [(ngModel)]="barCode"
        (blur)="blurValidate($event, 'barCode')"
      />
      <div>
        <p-button icon="pi pi-qrcode" severity="secondary" (click)="openScanner()" />
      </div>
    </div>
  </div>
  <div class="d-flex justify-content-between mt-4">
    <p-button label="Hủy" severity="secondary" (click)="visible = false" />
    <p-button label="Lưu" (click)="save()" />
  </div>
</p-dialog>
