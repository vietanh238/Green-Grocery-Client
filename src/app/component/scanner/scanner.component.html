<div class="scanner-container">
  <div class="scanner-header">
    <h4 class="scanner-title">
      <i class="pi pi-qrcode"></i>
      Quét mã vạch / QR Code
    </h4>
  </div>

  <div class="scanner-preview">
    <div class="scanner-frame">
      <zxing-scanner
        [formats]="allowedFormats"
        (scanSuccess)="onScanSuccess($event)"
        (camerasFound)="onCamerasFound($event)"
        [device]="currentDevice"
        [autostart]="true"
        [tryHarder]="true"
        [torch]="false"
        [previewFitMode]="'cover'"
      ></zxing-scanner>
      <div class="scan-overlay">
        <div class="scan-box">
          <div class="corner corner-tl"></div>
          <div class="corner corner-tr"></div>
          <div class="corner corner-bl"></div>
          <div class="corner corner-br"></div>
        </div>
      </div>
    </div>
    <p class="scan-instruction">Đưa mã vào khung hình để quét</p>
  </div>

  <div class="scanner-result">
    <label class="result-label">Kết quả quét:</label>
    <div class="result-input-group">
      <input
        type="text"
        class="result-input"
        [(ngModel)]="barcodeResult"
        disabled
        placeholder="Chưa có kết quả..."
      />
      <button
        class="btn-clear"
        [disabled]="!barcodeResult"
        (click)="resetBarcode()"
        title="Xoá kết quả"
      >
        <i class="pi pi-times"></i>
      </button>
    </div>
  </div>

  <div class="scanner-actions d-flex justify-content-between">
    <p-button label="Hủy" severity="secondary" (click)="closeDialog()" />
    <p-button label="Lưu" [disabled]="!barcodeResult" (click)="save()" />
  </div>
</div>
